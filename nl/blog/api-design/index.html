<!doctype html>
<html class="no-js" lang="">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Best practices for RESTful API design</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="manifest" href="site.webmanifest">
  <link rel="apple-touch-icon" sizes="180x180" href="/img/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/img/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/img/icons/favicon-16x16.png">
  <link rel="mask-icon" href="/img/icons/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="apple-mobile-web-app-title" content="Ontola.io">
  <meta name="application-name" content="Ontola.io">
  <meta name="msapplication-TileColor" content="#5a91af">
  <meta name="theme-color" content="#ffffff">
  <link rel="stylesheet" href="/css/normalize.css"/>
  <link rel="stylesheet" href="/css/main.css"/>
  <link rel="stylesheet" href="/css/syntax.css"/>
  <link href="https://fonts.googleapis.com/css?family=Montserrat:600,800" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
  <meta name="description" content="The internet started off as a place for linked documents.However, where humans are perfectly capable of understanding HTML documents through a browser, this ...">
<meta property="og:site_name" content="">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@ontola.io">

<title>Best practices for RESTful API design</title>
<meta property="og:title" content="Best practices for RESTful API design">
<meta name="twitter:title" content="Best practices for RESTful API design">
<meta property="og:description" content="The internet started off as a place for linked documents.
However, where humans are perfectly capable of understanding HTML documents through a browser, this does not apply for machines that need a specific piece of information.
That’s why every decent web service has an API, and probably uses it for their website, app, integrations and external services.
Unfortunately, too many APIs are unnecessarily hard to use and unintuitive.
In this article, I’ll give some practical advice on designing a RESTful, hypermedia API that follows web conventions.

"/>


<meta property="article:published_time" content="2018-07-12T00:00:00+02:00">


<meta property="og:image" content="/img/default.jpg">
<meta name="twitter:image" content="/img/default.jpg">

<meta property="og:url" content="http://ontola.io/blog/api-design/" />

<meta itemprop="keywords" content="" />




<meta property="article:author" content="Joep Meindertsma" />
<meta property="og:type" content="article">
  
  <meta name="twitter:creator" content="@joepmeindertsma">
  


</head>
<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav  id="navbar" class="nav__wrapper">
    <div class="nav">
      <a href="/" class="nav__logo">
        <img src="/img/logo.svg" />
        <span>Ontola</span><span class="nav__logo__tld">.io</span>
      </a>
      <div class="nav__links">
        <a href="/">home</a>
        <a href="/blog">blog</a>
        <!-- <a href="/about">about</a> -->
        <a href="/contact">contact</a>
      </div>
    </div>
  </nav>
  <div class="container">
      <div class="hero hero--smaller hero--narrow">
  <a href="/blog/"class="hero__link">
    <h3 id="hero-text">
      <i class="fas fa-level-up-alt"></i>
      Linked Data Blog
    </h3>
  </a>
</div>
<div class="post">
  <h1>Best practices for RESTful API design</h1>
  
  

<div class="details">
  <a href="https://twitter.com/@joepmeindertsma" target="_blank" class="details__author">Joep Meindertsma, </a>12 Jul 2018
</div>


  <p>The internet started off as a place for linked documents.
However, where humans are perfectly capable of understanding HTML documents through a browser, this does not apply for machines that need a specific piece of information.
That’s why every decent web service has an API, and probably uses it for their website, app, integrations and external services.
Unfortunately, too many APIs are unnecessarily hard to use and unintuitive.
In this article, I’ll give some practical advice on designing a RESTful, hypermedia API that follows web conventions.</p>

<h2 id="use-urls-as-ids">Use URLs as IDs</h2>
<p>Every thing in your API, every individual resource, should have its own URL. The URL should serve as both an <em>identifier</em> as well as a <em>locator</em>: it is the identity of the thing and it provides a way to fetch information about that thing. This makes URLs really useful.</p>

<p>Firstly, URLs make your responses <em>far easier to navigate</em>. Imagine a JSON object representing a social media post that references some author with an identity of <code class="highlighter-rouge">18EA91FB19</code>. From this information, you wouldn’t know where to find that author. You need to read the API docs, discover the endpoint for authors and compose your request. If the ID was a URL, you would instantly know where to send that request to. This is not just great for humans, but also for machines, since they can’t read your API docs - but they can navigate URLs.</p>

<p>Secondly, URLs are always unique. URLs are not just unique identifiers in a single system, but also unique across different systems. The domain name takes care of that. This means that you can use your data across multiple systems without worrying about name collisions in identifiers. This is one of the properties <a href="https://ontola.io/what-is-linked-data">that makes linked data awesome</a>.</p>

<p>Make sure that your URLs are stable. <a href="https://www.w3.org/Provider/Style/URI">Cool URIs don’t change</a>. If they really have to change, make sure the old URLs redirect to the new ones. Nobody likes broken links.</p>

<h2 id="your-api-endpoint-is-your-website">Your API endpoint is your website</h2>
<p>You don’t need a subdomain for your API, like <code class="highlighter-rouge">api.example.com</code> or a sub-path, like <code class="highlighter-rouge">example.com/api</code>. Your endpoint should be the root of your webpage: <code class="highlighter-rouge">example.com</code>.</p>

<p>This is useful, because as discussed above the URL should be both the identifier as the locator of a single resource. Whether someone is looking for a HTML version or for example a JSON representation of a resource, he should be able to use the same URL. This makes your API easier to use, because someone who navigates your website can know at any time how to access the same resource in some other format.</p>

<p>But if the URL does not change across format, how do you request the right one? This is where <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept">HTTP content negotiation</a> comes in handy. A client can send preferences about what kind of content it wants to receive in the <code class="highlighter-rouge">Accept</code> HTTP header. The default header for web browsers is <code class="highlighter-rouge">text/HTML</code>, but for most APIs, a machine readable setting such as <code class="highlighter-rouge">application/json</code> is more suitable.</p>

<p>But what about API versioning? We want our URLs <em>not to change</em>, so we should not use different URLs for different API versions. The solution, again, is to use a HTTP header. Use an <code class="highlighter-rouge">api-version</code> header or a <a href="https://developer.github.com/v3/media/">specific Mime type</a> in your requests.</p>

<h2 id="use-sensible-hierarchy-in-url-paths">Use sensible hierarchy in URL paths</h2>
<p>Having a URL hierarchy that makes sense is not just important for your website, but also for your API - especially if your API structure resembles your website structure. Try to come up with a sensible URL strategy, discuss it with your colleages and do all of this early in the development process.</p>

<p>A few things to consdier:</p>
<ul>
  <li>Move from large to small, from generic to specific.</li>
  <li>The user should be able to remove the last part of the URL and arrive at a parent resource.</li>
  <li>Let the hierarchy reflect the UX of navigating the website.</li>
  <li>Try to keep URLs as short as possible.</li>
  <li>Human readable URLs are easier to understand and share, and they are great for SEO.</li>
  <li><a href="https://www.w3.org/Provider/Style/URI">Cool URIs don’t change</a>. Leave out anything that might change, such as author, file name extensions, status or subject.</li>
</ul>

<h2 id="use-query-parameters-correctly">Use query parameters correctly</h2>
<p>The <a href="https://tools.ietf.org/html/rfc3986#section-3.4">URI spec</a> tells us to use query parameters only for <em>non-hierarchical data</em>.</p>

<p>Don’t use query parameters to identify a resource; use a path.</p>

<ul>
  <li><strong>Bad</strong>: <code class="highlighter-rouge">example.com/posts?id=123</code></li>
  <li><strong>Good</strong>: <code class="highlighter-rouge">example.com/posts/123</code></li>
</ul>

<p>Use query parameters for <em>optional</em> things like limiting, sorting, filtering and other modifiers:</p>

<ul>
  <li><strong>Good</strong>: <code class="highlighter-rouge">example.com/posts?limit=30</code></li>
  <li><strong>Good</strong>: <code class="highlighter-rouge">example.com/posts/123?show_hidden=true</code></li>
</ul>

<h2 id="use-http-methods">Use HTTP methods</h2>
<p>Instead of having a bunch of endpoints for various types of actions, use <em>a single URL for every single resource</em> in your application. Distinguish between actions using <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods">HTTP methods</a>.</p>

<ul>
  <li><strong>Bad</strong>: <code class="highlighter-rouge">GET example.com/showPost/123</code></li>
  <li><strong>Bad</strong>: <code class="highlighter-rouge">GET example.com/removePost/123</code></li>
  <li><strong>Good</strong>: <code class="highlighter-rouge">GET example.com/posts/123</code></li>
  <li><strong>Good</strong>: <code class="highlighter-rouge">DELETE example.com/posts/123</code></li>
</ul>

<p>There is a big difference between requests that aim to read content, create content or edit content. Make sure to use the GET, POST, PUT and PATCH HTTP methods correctly. The GET and PUT operations are <em>idempotent</em>, which means that a request can be repeated multiple times without side effects. This distinction is important, because it tells the client whether it can try again if an error occurs. It also helps with caching, since only GET request should be cacheable.</p>

<p>If you want to offer a form to delete or edit a resource, <em>that form will be a different resource from the original item</em>, so it will need a seperate URL. A nice convention is to nest that form resource below the original item. This way, the user just adds <code class="highlighter-rouge">/edit</code> to the a URL if he wants to edit that resource.</p>

<ul>
  <li><strong>Good</strong>: <code class="highlighter-rouge">GET example.com/posts/123/remove</code></li>
  <li><strong>Good</strong>: <code class="highlighter-rouge">GET example.com/posts/123/edit</code></li>
</ul>

<h2 id="use-http-status-codes">Use HTTP status codes</h2>
<p>Pretty much all types of error messages can be categorized in the existing <a href="https://developer.mozilla.org/nl/docs/Web/HTTP/Status">HTTP status codes</a>. These are not just useful to humans, but especially to machines. Status codes can be parsed far more quickly than a body text. Another advantage is that they are standardized, so the client library is likely to know what the status code represents. You don’t have to support every single one, but at the very least make sure that you use the five categories:</p>
<ul>
  <li><strong>1xx: informational</strong> - just letting you know</li>
  <li><strong>2xx: successful</strong> - everything’s OK</li>
  <li><strong>3xx: redirection</strong> - your content is somewhere else</li>
  <li><strong>4xx: client error</strong> - you’re doing something wrong</li>
  <li><strong>5xx: server error</strong> - we’re doing something wrong</li>
</ul>

<h2 id="add-context-to-your-json">Add context to your JSON</h2>
<p>Assuming you use JSON as a serialization format, you can use <a href="https://json-ld.org/spec/FCGS/json-ld/20180607/#the-context">@context</a>. The @context object is a nifty little idea to make your API more self-descriptive. It describes what the various keys in your JSON actually represent. It provides links to where the definition can be found.</p>

<p>Make sure all your IDs are actually links, and your context is included. Now all your JSON has become JSON-LD, which is <a href="https://ontola.io/what-is-linked-data">linked data</a>. That means that your JSON data is now convertible to other RDF formats (Turtle, N3, N-triples, etc.), which means it becomes far more reusable.</p>

<p>Keep in mind that the links that you use should preferably resolve to some document that explains what your concept represents. A good starting point to find relevant concepts is <a href="https://schema.org">schema.org</a>.</p>

<h2 id="offer-various-serialization-options">Offer various serialization options</h2>
<p>Be as flexible as possible in your serialization options. Someone who uses your API might be good at dealing with JSON, but may not know how to work with XML. Serializing an in-memory object to various serialization options is often not that complicated. If you use Ruby on Rails, check out our <a href="https://github.com/argu-co/rdf-serializers">rdf-serializers library</a> which supports JSON-LD, RDF/XML, N3, N-triples and Turtle. Use the <a href="#your-api-endpoint-is-your-website">aforementioned</a> HTTP accept header to handle content negotiation.</p>

<h2 id="standardize-index-pages-and-pagination">Standardize index pages and pagination</h2>
<p>You’re probably going to need index pages with pagination. How to deal with that? Pagination is not a trivial problem, but luckily for you, you’re not the first to encounter it. Don’t try to reinvent the wheel; use something that already exists, such as <a href="https://www.w3.org/TR/activitystreams-core/#collections">W3C activity stream collections</a> or <a href="http://www.hydra-cg.com/spec/latest/core/#collections">Hydra collections</a>.</p>

<h2 id="dont-require-an-api-key">Don’t require an API key</h2>
<p>Your default API (the HTML one) doesn’t need one, so your JSON API <a href="https://ruben.verborgh.org/blog/2013/11/29/the-lie-of-the-api/#api-keys-are-a-lie">shouldn’t need one</a> as well. Use rate limiting to make sure your servers don’t fry. You can still use API keys or authentication to give access to special parts of your API, of course.</p>

<h2 id="use-a-doc-subdomain-for-api-docs">Use a <code class="highlighter-rouge">doc.</code> subdomain for API docs</h2>
<p>Here’s <a href="https://medium.com/@fletcher91/semantic-documentation-1177d563783c">a clever little idea</a>: make your API documentation available at <code class="highlighter-rouge">doc.example.com</code>. If a user wants to know how your api works for a certain page, he just adds <code class="highlighter-rouge">doc.</code> in front of his current URL. Show the user a page that tells something useful about how to use the API at that route.</p>

<h2 id="use-your-own-api">Use your own API</h2>
<p>Finally, and perhaps most importantly: eat your own dog food. Make your API a first-class citizen by using it as the only way to access information from that system. API-driven development forces you to make your API actually work. It helps you document your API properly, since your colleagues need to use it as well. Besides, you’ll make your application more modular and gradually realize a microservice architecture, which has its own set of benefits.</p>

<p><a href="mailto:joep@argu.co">Let me know</a> if I’m missing something, or if you want help with API design!</p>

</div>
<div class="post__navigation">
  <div class="post__navigation__wrapper">
    
      <a class="post__navigation__previous" href="/what-is-linked-data/">&laquo; A brief introduction to linked data</a>
    
    
  </div>
</div>

  </div>
  <div class="footer--wrapper" id="footer">
    <div class="footer">
      <div class="footer-row">
        <div href="/" class="footer__header">
          Ontola
        </div>
        <a href="/">Home</a>
        <a href="/blog">Blog</a>
        <a href="/contact">Contact</a>
        
        
        
          <a href="/blog/api-design/">English</a>
        
      
         
        <!-- <a href="/about">About</a> -->
      </div>
      <div class="footer-row">
        <div class="footer__header">What we do</div>
        <a href="/">Linked Data</a>
        <a href="/software-development">Software Development</a>
        <a href="/continuous-integration">Continuous Integration</a>
      </div>
      <div class="footer-row">
        <div href="/" class="footer__header">Find us</div>
        <div class="footer__social_logos">
          <a href="https://github.com/ontola">
            <i title="Github" aria-label="Github" class="fab fa-github"></i>
          </a>
          <a href="https://www.linkedin.com/company/ontola/">
            <i title="LinkedIn" aria-label="LinkedIn" class="fab fa-linkedin"></i>
          </a>
          <a href="https://www.facebook.com/ontola.io/">
            <i title="Facebook" aria-label="Facebook" class="fab fa-facebook"></i>
          </a>
          <a href="https://twitter.com/ontola_io">
            <i title="Twitter" aria-label="Twitter" class="fab fa-twitter"></i>
          </a>
        </div>
        <a href="mailto:ontola@argu.co">
          <i class="fas fa-envelope"></i>
          ontola@argu.co
        </a>
        <a href="tel:0031636020942">
          <i class="fas fa-phone"></i>
          +316 360 209 42
        </a>
        <a href="https://goo.gl/maps/x5Sggs9X7L32">
          <i class="fas fa-map-marker-alt"></i>
          Koningslaan 62, Utrecht, NL
        </a>
        <div><a href="https://argu.co">
          <i class="fas fa-briefcase"></i>
          Argu B.V.</a> kvk 65684168<div>
        </div>
    </div>
  </div>
  <script src="/js/main.js"></script>
  <script src="/js/navbarScroll.js"></script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-121994595-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-121994595-1');
  </script>
</body>

</html>
